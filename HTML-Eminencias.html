<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Eminencias</title>
</head>
<body>
    <table>
        <tr><td>    
    <table>
        <tr><td><label for="">Nombre: </label></td><td><input type="text" name="ficha"></td></tr>     
        <tr><td><label for="">Apellidos</label></td><td><input type="text" name="ficha"></td></tr>
        <tr><td><label for="">DNI: </label></td><td><input type="text" name="ficha" disabled></td></tr>
        <tr><td><label for="">Fecha Nacimiento: </label></td><td><input type="text"  id="born"></td></tr>
        <tr><td><label for="">Fecha Muerte: </label></td><td><input type="text" id="dead"></td></tr>
    </table></td><td><img id="imagen" src="ordenador.jpg" width="143" height="144" alt=""></td></tr>
    <tr><td><input type="button" value="AÑADIR" onclick = "add()" style="width:40mm;height: 7mm;"></td><td><input type="button" value="BUSCAR" onclick = "buscar()" style="width: 40mm;height: 7mm;"></td></tr>
</table>
<h3>Principal aportación al mundo</h3>
<textarea id = "caja" cols="30" rows="5" style="width: 116mm;"></textarea>

<script>
    var cientificos = [];

    function Cientifico(nombre, apellido, dni, nacimiento, muerte, contribucion) {
        this.nombre = nombre;
        this.apellido = apellido;
        this.dni = dni;
        this.nacimiento = nacimiento;
        this.muerte = muerte;
        this.contribucion = contribucion;
        let inicio = nombre[0];
        let final = apellido.slice(-3);            
        let random = Math.round (Math.random()*9+1)
        this.dni = inicio + final + random;

    }
    

function add() {

    let nombre = document.getElementsByName("ficha")[0].value;
    let apellido = document.getElementsByName("ficha")[1].value;
    let dni = document.getElementsByName("ficha")[2].value;
    let nacimiento = document.getElementById("born").value;
    let muerte = document.getElementById("dead").value;
    let contribucion = document.getElementsByTagName('textarea').value;

    let nuevoCientifico = new Cientifico(nombre, apellido, dni, nacimiento, muerte, contribucion, imagen);
    cientificos.push(nuevoCientifico);

    limpiar(); 
}

function buscar() {
    let nombre = document.getElementsByName("ficha")[0].value;
    let encontrado = false;
    

    for (let cientifico of cientificos) {
        if (nombre == cientifico.nombre) { //sensible a mayusculas y minusculas
            document.getElementsByName("ficha")[0].value = cientifico.nombre;
            document.getElementsByName("ficha")[1].value = cientifico.apellido;
            document.getElementsByName("ficha")[2].value = cientifico.dni;
            document.getElementById("born").value = cientifico.nacimiento;
            document.getElementById("dead").value = cientifico.muerte;
            document.getElementsByTagName("textarea")[0].value = cientifico.contribucion;
            document.images[0].src = nombre[0] + cientifico.apellido + ".jpg";
            encontrado = true;
            break;
        } 
    }

    if (!encontrado) {
            alert("Ese científico no está en nuestra bbdd");
        }
}

 function limpiar() {

    document.getElementsByName("ficha")[0].value = "";
    document.getElementsByName("ficha")[1].value = "";
    document.getElementsByName("ficha")[2].value = "";
    document.getElementById("born").value = "";
    document.getElementById("dead").value = "";
    document.getElementById("caja").value = "";
    
}

</script>
</body>
</html>